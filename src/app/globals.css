/* ================================
   Tailwind layers (MUST be first)
   ================================ */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ================================
   Base tokens & resets
   ================================ */
@layer base {
  html { color-scheme: light; }
  html, body { margin: 0; padding: 0; }
  img, video, canvas { display: block; }

  /* body text (bg is set in layout.tsx) */
  body { @apply text-gy-800 antialiased; }

  /* headings */
  h1, h2, h3, h4 { @apply text-gy-900; }

  /* muted text */
  small, .muted { @apply text-gy-600; }

  /* hairline divider */
  hr { @apply border-hairline; }

  /* “content links” (not nav) */
  .gy-prose a {
    @apply text-gy-700 hover:text-gy-900 underline underline-offset-4 decoration-gy-300;
  }

  /* keyboard focus ring */
  a:focus-visible,
  button:focus-visible,
  [role="button"]:focus-visible,
  input:focus-visible,
  select:focus-visible,
  textarea:focus-visible,
  summary:focus-visible {
    outline: 2px solid theme("colors.accent.400", #34d399);
    outline-offset: 2px;
  }
  a:focus:not(:focus-visible),
  button:focus:not(:focus-visible),
  [role="button"]:focus:not(:focus-visible),
  input:focus:not(:focus-visible),
  select:focus:not(:focus-visible),
  textarea:focus:not(:focus-visible),
  summary:focus:not(:focus-visible) {
    outline: none;
  }

  /* -------- header theming via data-hdr attribute -------- */
  /* When <html data-hdr="light"> … header text is light-on-dark */
  html[data-hdr="light"] .hdr-fg { color:#fff; text-shadow:0 1px 2px rgba(0,0,0,.35); }
  html[data-hdr="dark"]  .hdr-fg { color: rgb(17 24 39); } /* gy-900 */
  .hdr-fg { transition: color .35s ease, text-shadow .35s ease; }

  /* -------- page mute via data-muted (set by Header on scroll) -------- */
  /* Smooth transition for content containers */
  main, section, .gy-card {
    transition: filter .25s ease, opacity .25s ease;
  }
  /* Slight desaturation + lower opacity so the fixed header pops */
  :root[data-muted] main {
    filter: saturate(0.85) contrast(0.98);
    opacity: 0.92;
  }
}

/* ================================
   Reusable components
   ================================ */
@layer components {
  .gy-container { @apply container mx-auto max-w-[1100px] px-4 md:px-6; }

  .gy-brand { @apply no-underline hover:no-underline font-semibold tracking-tight; }
  .gy-navlink { @apply no-underline underline-offset-4 decoration-gy-300; }
  .gy-navlink:hover { @apply underline; }
  .gy-navlink[aria-current="page"] { @apply font-semibold; }

  .gy-link { @apply text-gy-700 hover:text-gy-900 underline underline-offset-4 decoration-gy-300; }

  .gy-btn {
    @apply inline-flex items-center justify-center rounded-md px-4 py-2
           text-sm font-medium bg-gy-900 text-white hover:bg-gy-800 transition;
  }
  .gy-btn--ghost { @apply bg-transparent text-gy-900 hover:text-gy-800 border border-gy-300; }

  .gy-card { @apply rounded-2xl border border-hairline bg-white shadow-sm; }

  .skip-link {
    @apply fixed left-4 top-4 z-[100] rounded-md bg-white px-3 py-2 shadow text-gy-900;
    transform: translateY(-200%);
    transition: transform 150ms ease;
  }
  .skip-link:focus-visible { transform: translateY(0); }
}

/* ================================
   Motion & scrolling
   ================================ */
html:focus-within { scroll-behavior: smooth; }
@media (prefers-reduced-motion: reduce) {
  html:focus-within { scroll-behavior: auto; }
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ================================
   Anchor offset
   ================================ */
:target { scroll-margin-top: 7rem; }
